def cat_test():
	
    count = db.trend_pull.category.count()
    count_cutoff = 3          #update if we want to increase the cutoff
    session.rows = db(((db.trend_pull.engine == 'US') | (db.trend_pull.engine == 'UK') | (db.trend_pull.engine == 'AUS')) & (db.trend_pull.category<>"Random")).select(db.trend_pull.category,db.trend_pull.engine,groupby=db.trend_pull.category,having=count>count_cutoff,orderby=db.trend_pull.category|db.trend_pull.engine)
	
	recat_dict = {'1995 film':'Film'
				  ,'1996 film':'Film'
				  ,'1997 film':'Film'
				  ,'1998 film':'Film'
				  ,'1999 film':'Film'
				  ,'2000 film':'Film'
				  ,'2008 film':'Film'
				  ,'2009 film':'Film'
				  ,'2010 film':'Film'
				  ,'2011 film':'Film'
				  ,'2012 film':'Film'
				  ,'2013 film':'Film'
				  ,'2014 film':'Film'
				  ,'2015 film':'Film'
				  ,'2016 film':'Film'
				  ,'Film series':'Film'
				  ,'Film actor':'Actor'
				  ,'Film actress':'Actress'
				  ,'American TV Program':'American television'
				  ,'American TV program':'American television'
				  ,'American Television Series':'American television'
				  ,'American comedy series':'American television'
				  ,'American television program':'American television'
				  ,'American television series':'American television'
				  ,'American television show':'American television'
				  ,'American football linebacker':'American football'
				  ,'American football quarterback':'American football'
				  ,'American football running back':'American football'
				  ,'American football tight end':'American football'
				  ,'American football wide receiver':'American football'
				  ,'Consumer electronics company':'Company'
				  ,'Fast food restaurant company':'Company'
				  ,'NCAA Basketball Team':'Basketball'
				  ,'Basketball Player':'Basketball'
				  ,'Basketball player':'Basketball'
				  ,'Basketball Team':'Basketball'
				  ,'Basketball team':'Basketball'
				  ,'Basketball Coach':'Basketball'
				  ,'Baseball player':'Baseball'
				  ,'Baseball Player':'Baseball'
				  ,'Baseball Team':'Baseball'
				  ,'Baseball team':'Baseball'
				  ,'Video game':'Video games'
				  ,'Video game series':'Video games'
				  ,'Country in Africa':'Country'
				  ,'Country in Asia':'Country'
				  ,'Country in Europe':'Country'
				  ,'Country in Oceania':'Country'
				  
	
    return locals()
